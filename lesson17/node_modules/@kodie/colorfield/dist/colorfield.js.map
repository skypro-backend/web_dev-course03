{"version":3,"file":"colorfield.js","sources":["../src/colorfield.js"],"sourcesContent":["/*!\n  colorfield v0.1.0 (https://github.com/kodie/colorfield)\n  by Kodie Grantham (https://kodieg.com)\n*/\n\nconst colorfield = () => {\n  const elements = document.getElementsByClassName('colorfield')\n\n  for (let i = 0; i < elements.length; i++) {\n    (function (element) {\n      const input = element.querySelector('input[type=\"color\"]')\n\n      if (input) {\n        const openElements = element.getElementsByClassName('colorfield-open')\n        const valueInputs = element.getElementsByClassName('colorfield-input')\n        const valueElements = element.getElementsByClassName('colorfield-value')\n        const stylePropElements = element.querySelectorAll('[data-colorfield-style-prop]')\n\n        element.open = function () {\n          input.focus()\n          input.click()\n        }\n\n        element.set = function (value) {\n          const currentValue = input.value\n\n          if (value.charAt(0) !== '#') value = '#' + value\n          if (value === currentValue) return\n          if (value.length > 7) value = value.substr(0, 7)\n\n          if (value.length >= 4 && value.length < 7) {\n            value = '#' + value[1] + value[1] + value[2] + value[2] + value[3] + value[3]\n          }\n\n          input.value = value\n\n          colorfield.triggerEvent('change', input)\n        }\n\n        element.get = function () {\n          return input.value\n        }\n\n        if (openElements.length) {\n          for (let j = 0; j < openElements.length; j++) {\n            const openElement = openElements[j]\n\n            openElement.addEventListener('click', function (e) {\n              element.open()\n            }, false)\n\n            openElement.addEventListener('focus', function (e) {\n              element.open()\n            }, false)\n          }\n        }\n\n        if (valueInputs.length) {\n          for (let v = 0; v < valueInputs.length; v++) {\n            const valueInput = valueInputs[v]\n\n            valueInput.addEventListener('change', function (e) {\n              if (!e.colorfieldTriggered) {\n                element.set(valueInput.value)\n              }\n            }, false)\n\n            valueInput.addEventListener('input', function (e) {\n              if (valueInput.colorfieldTimer) {\n                clearTimeout(valueInput.colorfieldTimer)\n              }\n\n              valueInput.colorfieldTimer = colorfield.triggerEvent('change', valueInput, {}, 1000)\n            })\n          }\n        }\n\n        input.addEventListener('change', function (e) {\n          if (valueInputs.length) {\n            for (let a = 0; a < valueInputs.length; a++) {\n              const valueInput = valueInputs[a]\n              valueInput.value = input.value\n            }\n          }\n\n          if (valueElements.length) {\n            for (let b = 0; b < valueElements.length; b++) {\n              const valueElement = valueElements[b]\n              const valueElementType = valueElement.tagName.toLowerCase()\n\n              if (valueElementType === 'input') {\n                valueElement.val = input.value\n              } else {\n                valueElement.textContent = input.value\n              }\n            }\n          }\n\n          if (stylePropElements.length) {\n            for (let c = 0; c < stylePropElements.length; c++) {\n              const stylePropElement = stylePropElements[c]\n              const styleProps = stylePropElement.getAttribute('data-colorfield-style-prop').split(',')\n\n              for (let k = 0; k < styleProps.length; k++) {\n                stylePropElement.style[styleProps[k]] = input.value\n              }\n            }\n          }\n        })\n\n        colorfield.triggerEvent('change', input)\n      } else {\n        console.warn(element, 'An color input field is required for each colorfield instance.')\n      }\n    })(elements[i])\n  }\n\n  return elements\n}\n\ncolorfield.triggerEvent = (type, element, data, delay) => {\n  return setTimeout(function () {\n    const e = new Event(type, { bubbles: true })\n\n    for (const key in data) {\n      if (Object.prototype.hasOwnProperty.call(data, key)) {\n        e[key] = data[key]\n      }\n    }\n\n    element.dispatchEvent(e)\n  }, delay || 1)\n}\n\nexport default colorfield\n"],"names":["colorfield","elements","document","getElementsByClassName","i","length","element","input","querySelector","openElements","valueInputs","valueElements","stylePropElements","querySelectorAll","open","focus","click","set","value","currentValue","charAt","substr","triggerEvent","get","j","openElement","addEventListener","e","v","valueInput","colorfieldTriggered","colorfieldTimer","clearTimeout","a","b","valueElement","valueElementType","tagName","toLowerCase","val","textContent","c","stylePropElement","styleProps","getAttribute","split","k","style","console","warn","type","data","delay","setTimeout","Event","bubbles","key","Object","prototype","hasOwnProperty","call","dispatchEvent"],"mappings":"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"}